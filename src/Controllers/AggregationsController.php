<?php

declare(strict_types=1);

/*
 * Payrix
 *
 * This file was automatically generated by Worldpay.
 */

namespace PayrixLib\Controllers;

use Core\Request\Parameters\BodyParam;
use Core\Request\Parameters\HeaderParam;
use Core\Request\Parameters\QueryParam;
use Core\Request\Parameters\TemplateParam;
use Core\Response\Types\ErrorType;
use CoreInterfaces\Core\Request\RequestMethod;
use PayrixLib\Exceptions\ApiException;
use PayrixLib\Exceptions\ErrorFourHundredException;
use PayrixLib\Models\AggregationsPostRequest;
use PayrixLib\Models\AggregationsPutRequest;
use PayrixLib\Models\AggregationsResponseResult;

class AggregationsController extends BaseController
{
    /**
     * Query an Aggregation resource that uses a search to query for records on the given resource and
     * applies the desired calculations (count, sum, min, and/or max) to the field in question.
     *
     * @param string $id The ID of this resource or The Aggregation ID.
     * @param string|null $token A single-use, limited authentication layer in addition to an API
     *        Key or Session Key to authorize sensitive operations. <a href="/apis/payrix/dev-int-
     *        guide/references/authentication/auth-tokens" target="_blank">Auth Tokens</a> add
     *        security by requiring one-time approval for specific actions.
     * @param string|null $requestToken A custom, one-time identifier for any API request (GET, PUT,
     *        POST, or DELETE). Blocks future requests with the same token for 48 hours, ensuring
     *        only the first request is processed. Valid values can contain 1-100 alphanumeric and
     *        special characters. See <a href="/apis/payrix/dev-int-
     *        guide/references/authentication/request-tokens" target="_blank">Request Tokens</a>
     *        for more information.
     * @param string|null $embed Use the embed query parameter to include full object(s) of related
     *        resource(s) directly within the API response. This allows retrieval of associated
     *        resources in a single request, reducing the need for multiple round-trips.
     *        Format: GET https://{server}.payrix.com/{endpoint}?embed={relatedObject}
     * @param string|null $searchFilter Set this header to filter or sort the list of resources that
     *        the method returns.
     *        For example, to find all resources that have a property of 'public' set to '1', set
     *        this header to 'public[equals]=1'. You can use the operators 'equals', 'greater',
     *        'less', 'like', 'in' and 'sort'. To sort the resources, use the keywords 'asc' (for
     *        an ascending sort) or 'desc' (for a descending sort).
     *        You may also use explicit 'and/or' querying by passing arrays of or and arrays of
     *        and parameters. For example, to find all resources that have a property of 'public'
     *        set to '1' or a property of 'active' set to '0', set this header to
     *        'or[][public][equals]=1&or[][active][equals]=0'.
     *
     * @return AggregationsResponseResult Response from the API call
     *
     * @throws ApiException Thrown if API call fails
     */
    public function getAggregationsId(
        string $id,
        ?string $token = null,
        ?string $requestToken = null,
        ?string $embed = null,
        ?string $searchFilter = null
    ): AggregationsResponseResult {
        $_reqBuilder = $this->requestBuilder(RequestMethod::GET, '/aggregations/{id}')
            ->auth('apiKey', 'sessionKey', 'txnSessionKey')
            ->parameters(
                TemplateParam::init('id', $id),
                HeaderParam::init('token', $token),
                HeaderParam::init('request-token', $requestToken),
                QueryParam::init('embed', $embed),
                HeaderParam::init('search', $searchFilter)
            );

        $_resHandler = $this->responseHandler()
            ->throwErrorOn('400', ErrorType::init('Error', ErrorFourHundredException::class))
            ->type(AggregationsResponseResult::class);

        return $this->execute($_reqBuilder, $_resHandler);
    }

    /**
     * Update an Aggregation resource or Update an Aggregation.
     *
     * @param string $id The ID of this resource or The Aggregation ID.
     * @param AggregationsPutRequest $body Update Aggregation Request
     * @param string|null $token A single-use, limited authentication layer in addition to an API
     *        Key or Session Key to authorize sensitive operations. <a href="/apis/payrix/dev-int-
     *        guide/references/authentication/auth-tokens" target="_blank">Auth Tokens</a> add
     *        security by requiring one-time approval for specific actions.
     * @param string|null $requestToken A custom, one-time identifier for any API request (GET, PUT,
     *        POST, or DELETE). Blocks future requests with the same token for 48 hours, ensuring
     *        only the first request is processed. Valid values can contain 1-100 alphanumeric and
     *        special characters. See <a href="/apis/payrix/dev-int-
     *        guide/references/authentication/request-tokens" target="_blank">Request Tokens</a>
     *        for more information.
     * @param string|null $searchFilter Set this header to filter or sort the list of resources that
     *        the method returns.
     *        For example, to find all resources that have a property of 'public' set to '1', set
     *        this header to 'public[equals]=1'. You can use the operators 'equals', 'greater',
     *        'less', 'like', 'in' and 'sort'. To sort the resources, use the keywords 'asc' (for
     *        an ascending sort) or 'desc' (for a descending sort).
     *        You may also use explicit 'and/or' querying by passing arrays of or and arrays of
     *        and parameters. For example, to find all resources that have a property of 'public'
     *        set to '1' or a property of 'active' set to '0', set this header to
     *        'or[][public][equals]=1&or[][active][equals]=0'.
     *
     * @return AggregationsResponseResult Response from the API call
     *
     * @throws ApiException Thrown if API call fails
     */
    public function putAggregationsId(
        string $id,
        AggregationsPutRequest $body,
        ?string $token = null,
        ?string $requestToken = null,
        ?string $searchFilter = null
    ): AggregationsResponseResult {
        $_reqBuilder = $this->requestBuilder(RequestMethod::PUT, '/aggregations/{id}')
            ->auth('apiKey', 'sessionKey', 'txnSessionKey')
            ->parameters(
                TemplateParam::init('id', $id),
                HeaderParam::init('Content-Type', 'application/json'),
                BodyParam::init($body),
                HeaderParam::init('token', $token),
                HeaderParam::init('request-token', $requestToken),
                HeaderParam::init('search', $searchFilter)
            );

        $_resHandler = $this->responseHandler()
            ->throwErrorOn('400', ErrorType::init('Error', ErrorFourHundredException::class))
            ->type(AggregationsResponseResult::class);

        return $this->execute($_reqBuilder, $_resHandler);
    }

    /**
     * Delete an Aggregation resource or an Aggregation.
     *
     * @param string $id The ID of this resource or The Aggregation ID.
     * @param string|null $token A single-use, limited authentication layer in addition to an API
     *        Key or Session Key to authorize sensitive operations. <a href="/apis/payrix/dev-int-
     *        guide/references/authentication/auth-tokens" target="_blank">Auth Tokens</a> add
     *        security by requiring one-time approval for specific actions.
     * @param string|null $requestToken A custom, one-time identifier for any API request (GET, PUT,
     *        POST, or DELETE). Blocks future requests with the same token for 48 hours, ensuring
     *        only the first request is processed. Valid values can contain 1-100 alphanumeric and
     *        special characters. See <a href="/apis/payrix/dev-int-
     *        guide/references/authentication/request-tokens" target="_blank">Request Tokens</a>
     *        for more information.
     * @param string|null $searchFilter Set this header to filter or sort the list of resources that
     *        the method returns.
     *        For example, to find all resources that have a property of 'public' set to '1', set
     *        this header to 'public[equals]=1'. You can use the operators 'equals', 'greater',
     *        'less', 'like', 'in' and 'sort'. To sort the resources, use the keywords 'asc' (for
     *        an ascending sort) or 'desc' (for a descending sort).
     *        You may also use explicit 'and/or' querying by passing arrays of or and arrays of
     *        and parameters. For example, to find all resources that have a property of 'public'
     *        set to '1' or a property of 'active' set to '0', set this header to
     *        'or[][public][equals]=1&or[][active][equals]=0'.
     *
     * @return AggregationsResponseResult Response from the API call
     *
     * @throws ApiException Thrown if API call fails
     */
    public function deleteAggregationsId(
        string $id,
        ?string $token = null,
        ?string $requestToken = null,
        ?string $searchFilter = null
    ): AggregationsResponseResult {
        $_reqBuilder = $this->requestBuilder(RequestMethod::DELETE, '/aggregations/{id}')
            ->auth('apiKey', 'sessionKey', 'txnSessionKey')
            ->parameters(
                TemplateParam::init('id', $id),
                HeaderParam::init('token', $token),
                HeaderParam::init('request-token', $requestToken),
                HeaderParam::init('search', $searchFilter)
            );

        $_resHandler = $this->responseHandler()
            ->throwErrorOn('400', ErrorType::init('Error', ErrorFourHundredException::class))
            ->type(AggregationsResponseResult::class);

        return $this->execute($_reqBuilder, $_resHandler);
    }

    /**
     * Query an Aggregation resource using the search to query for records on the given resource and apply
     * desired calculations (count, sum, min, and/or max) to the specified field.
     *
     * @param string|null $token A single-use, limited authentication layer in addition to an API
     *        Key or Session Key to authorize sensitive operations. <a href="/apis/payrix/dev-int-
     *        guide/references/authentication/auth-tokens" target="_blank">Auth Tokens</a> add
     *        security by requiring one-time approval for specific actions.
     * @param string|null $requestToken A custom, one-time identifier for any API request (GET, PUT,
     *        POST, or DELETE). Blocks future requests with the same token for 48 hours, ensuring
     *        only the first request is processed. Valid values can contain 1-100 alphanumeric and
     *        special characters. See <a href="/apis/payrix/dev-int-
     *        guide/references/authentication/request-tokens" target="_blank">Request Tokens</a>
     *        for more information.
     * @param int|null $pageNumber Set this path parameter to request a specific page of records.
     *        For example, set `?page[number]=2` to retrieve the second page of records for this
     *        request.
     * @param int|null $pageLimit Set this path parameter to request up to a specific amount of
     *        records. By default 30 records are retrieved per page. The maximum limit that can be
     *        set is 100.
     *        For example, set `?page[limit]=50` to retrieve up to 50 records for this request.
     * @param string|null $embed Use the embed query parameter to include full object(s) of related
     *        resource(s) directly within the API response. This allows retrieval of associated
     *        resources in a single request, reducing the need for multiple round-trips.
     *        Format: GET https://{server}.payrix.com/{endpoint}?embed={relatedObject}
     * @param string|null $searchFilter Set this header to filter or sort the list of resources that
     *        the method returns.
     *        For example, to find all resources that have a property of 'public' set to '1', set
     *        this header to 'public[equals]=1'. You can use the operators 'equals', 'greater',
     *        'less', 'like', 'in' and 'sort'. To sort the resources, use the keywords 'asc' (for
     *        an ascending sort) or 'desc' (for a descending sort).
     *        You may also use explicit 'and/or' querying by passing arrays of or and arrays of
     *        and parameters. For example, to find all resources that have a property of 'public'
     *        set to '1' or a property of 'active' set to '0', set this header to
     *        'or[][public][equals]=1&or[][active][equals]=0'.
     *
     * @return AggregationsResponseResult Response from the API call
     *
     * @throws ApiException Thrown if API call fails
     */
    public function getAggregations(
        ?string $token = null,
        ?string $requestToken = null,
        ?int $pageNumber = null,
        ?int $pageLimit = null,
        ?string $embed = null,
        ?string $searchFilter = null
    ): AggregationsResponseResult {
        $_reqBuilder = $this->requestBuilder(RequestMethod::GET, '/aggregations')
            ->auth('apiKey', 'sessionKey', 'txnSessionKey')
            ->parameters(
                HeaderParam::init('token', $token),
                HeaderParam::init('request-token', $requestToken),
                QueryParam::init('page[number]', $pageNumber),
                QueryParam::init('page[limit]', $pageLimit),
                QueryParam::init('embed', $embed),
                HeaderParam::init('search', $searchFilter)
            );

        $_resHandler = $this->responseHandler()
            ->throwErrorOn('400', ErrorType::init('Error', ErrorFourHundredException::class))
            ->type(AggregationsResponseResult::class);

        return $this->execute($_reqBuilder, $_resHandler);
    }

    /**
     * Create an Aggregation resource that uses the search to query for records on a given resource and
     * applies the desired calculations (count, sum, min, and/or max) to the field in question.
     *
     * @param AggregationsPostRequest $body Create Aggregation Request
     * @param string|null $token A single-use, limited authentication layer in addition to an API
     *        Key or Session Key to authorize sensitive operations. <a href="/apis/payrix/dev-int-
     *        guide/references/authentication/auth-tokens" target="_blank">Auth Tokens</a> add
     *        security by requiring one-time approval for specific actions.
     * @param string|null $requestToken A custom, one-time identifier for any API request (GET, PUT,
     *        POST, or DELETE). Blocks future requests with the same token for 48 hours, ensuring
     *        only the first request is processed. Valid values can contain 1-100 alphanumeric and
     *        special characters. See <a href="/apis/payrix/dev-int-
     *        guide/references/authentication/request-tokens" target="_blank">Request Tokens</a>
     *        for more information.
     *
     * @return AggregationsResponseResult Response from the API call
     *
     * @throws ApiException Thrown if API call fails
     */
    public function postAggregations(
        AggregationsPostRequest $body,
        ?string $token = null,
        ?string $requestToken = null
    ): AggregationsResponseResult {
        $_reqBuilder = $this->requestBuilder(RequestMethod::POST, '/aggregations')
            ->auth('apiKey', 'sessionKey', 'txnSessionKey')
            ->parameters(
                HeaderParam::init('Content-Type', 'application/json'),
                BodyParam::init($body),
                HeaderParam::init('token', $token),
                HeaderParam::init('request-token', $requestToken)
            );

        $_resHandler = $this->responseHandler()
            ->throwErrorOn('400', ErrorType::init('Error', ErrorFourHundredException::class))
            ->type(AggregationsResponseResult::class);

        return $this->execute($_reqBuilder, $_resHandler);
    }
}
